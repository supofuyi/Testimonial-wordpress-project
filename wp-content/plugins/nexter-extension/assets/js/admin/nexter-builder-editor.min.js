"use strict";document.addEventListener("DOMContentLoaded",e=>{function r(e){e&&(e.style.display="block")}function c(e){e&&(e.style.display="none")}function o(e){var t,n;x&&((t=document.querySelector(".nxt-sections-rules-fields > .cmb2-id-nxt-add-display-rule"))&&setTimeout(function(){("show"==e?r:c)(t)},10),(n=document.querySelector(".nxt-sections-rules-fields > .cmb2-id-nxt-exclude-display-rule"))&&setTimeout(function(){("show"==e?r:c)(n)},10))}function n(e){var t;e&&"pages"===e?(c(f),r(E),r(w),"singular"==(t=document.querySelector(".cmb2-id-nxt-hooks-layout-pages input[name=nxt-hooks-layout-pages]:checked")).value&&j?j.value="nxt_builder":"archives"==t.value&&j?j.value="nxt_builder-archives":j&&(j.value="wp-post")):(e&&"sections"===e?(c(w),c(_),r(f),r(g),(t=document.querySelector(".cmb2-id-nxt-hooks-layout-sections input[name=nxt-hooks-layout-sections]:checked"))&&"none"==t.value?(o("hide"),c(x)):(o("show"),r(x))):e&&"code_snippet"===e?(c(w),c(g),r(f),r(_),r(x),o("show"),(e=document.querySelector(".cmb2-id-nxt-hooks-layout-code-snippet input[name=nxt-hooks-layout-code-snippet]:checked"))&&e.value&&S(e.value)):(c(f),c(w),o("hide"),c(x)),j&&(j.value="wp-post"))}function l(e){var t=document.getElementById("nxt-hooks-footer-style"),n=document.querySelector(".cmb2-id-nxt-hooks-footer-smart-bgcolor");e&&"footer"==e?(r(x),o("show"),(t&&"smart"==t.value?r:c)(n)):(e&&"none"!=e?(r(x),o("show")):(c(x),o("hide")),c(n))}function u(e){e&&"singular"===e?(r(y),r(h),c(v),c(m),j&&(j.value="nxt_builder")):e&&"archives"===e?(r(v),r(m),c(y),c(h),j&&(j.value="nxt_builder-archives")):(c(y),c(h),c(v),c(m),j&&(j.value="wp-post"))}var t,a,i,s,d=".cmb2",p="nxt",y=document.querySelector(d+"-id-nxt-singular-group"),h=document.querySelector(".nxt-preview-singular"),v=document.querySelector(d+"-id-nxt-archive-group"),m=document.querySelector(".nxt-preview-archive"),f=document.querySelector(".nxt-sections-wrap-fields"),g=document.querySelector(".nxt-sections-inner-fields"),x=document.querySelector(".nxt-sections-rules-fields"),_=document.querySelector(".nxt-code-wrap-fields"),w=document.querySelector(".nxt-pages-rules-fields"),E=document.getElementById("nxt-hooks-layout-pages"),j=document.getElementById("_elementor_template_type"),S=function(e){e&&"php"===e?(c(x),o("hide")):!e||"html"!==e&&"css"!==e&&"javascript"!==e||(r(x),o("show"))};document.getElementById(p+"-hooks-layout")&&(t=document.querySelectorAll(".cmb2-id-nxt-hooks-layout input[name=nxt-hooks-layout]"),s=document.querySelector(".cmb2-id-nxt-hooks-layout input[name=nxt-hooks-layout]:checked"),a=document.querySelectorAll(".cmb2-id-nxt-hooks-layout-sections input[name=nxt-hooks-layout-sections]"),i=document.querySelector(".cmb2-id-nxt-hooks-layout-sections input[name=nxt-hooks-layout-sections]:checked"),T=document.querySelectorAll(".cmb2-id-nxt-hooks-layout-pages input[name=nxt-hooks-layout-pages]"),C=document.querySelector(".cmb2-id-nxt-hooks-layout-pages input[name=nxt-hooks-layout-pages]:checked"),q=document.querySelectorAll(".cmb2-id-nxt-hooks-layout-code-snippet input[name=nxt-hooks-layout-code-snippet]"),d=document.querySelector(".cmb2-id-nxt-hooks-layout-code-snippet input[name=nxt-hooks-layout-code-snippet]:checked"),null!=t&&(s=s.value,n(s),Array.prototype.forEach.call(t,function(e,t){e.addEventListener("change",function(e){n(this.value)})}),"sections"===s&&(s=i.value,l(s)),Array.prototype.forEach.call(a,function(e,t){e.addEventListener("change",function(e){l(this.value)})}),"code_snippet"===s&&(A=d.value,S(A)),Array.prototype.forEach.call(q,function(e,t){e.addEventListener("change",function(e){S(this.value)})}),A=C.value,u(A),Array.prototype.forEach.call(T,function(e,t){e.addEventListener("change",function(e){u(this.value)})})));var b="singular",q=p+"-"+b+"-group",Q=p+"-"+b+"-cond-rule",k=p+"-"+b+"-cond-type",C=jQuery(document.getElementById(q+"_repeat")),O="archive",A=p+"-"+O+"-group",I=p+"-"+O+"-cond-rule",B=p+"-"+O+"-cond-type",T=jQuery(document.getElementById(A+"_repeat")),N=JSON.parse(JSON.stringify(NexterConfig));C.on("cmb2_add_row",function(e,t){var n=t.data("iterator"),t=document.getElementById("cmb-group-nxt-"+b+"-group-"+n);t&&(n=t.querySelector("."+Q+" .pw_select"),jQuery(n).select2(),n.value="post",n.dispatchEvent(new Event("change")),t=t.querySelector("."+k+" .pw_multiselect"),jQuery(t).select2(),t.value="all",t.dispatchEvent(new Event("change")))}),T.on("cmb2_add_row",function(e,t){var n=t.data("iterator"),t=document.getElementById("cmb-group-nxt-"+O+"-group-"+n);t&&(c(t.querySelector("."+B)),n=t.querySelector("."+I+" .pw_select"),jQuery(n).select2(),n.value="all",n.dispatchEvent(new Event("change")),t=t.querySelector("."+B+" .pw_multiselect"),jQuery(t).select2(),t.value="all",t.dispatchEvent(new Event("change")))}),document.getElementById(q+"_repeat")&&(M=document.querySelectorAll("#"+q+"_repeat .cmb-repeatable-grouping ."+Q+" .pw_select"),Array.prototype.forEach.call(M,function(e,t){var n=e.value,e=e.closest(".cmb-repeatable-grouping").querySelector("."+k);(null!=n&&"front_page"!=n?r:c)(e)})),document.getElementById(A+"_repeat")&&(M=document.querySelectorAll("#"+A+"_repeat .cmb-repeatable-grouping ."+I+" .pw_select"),Array.prototype.forEach.call(M,function(e,t){var n=e.value,e=e.closest(".cmb-repeatable-grouping").querySelector("."+B);(null!=n&&""!=N.nxt_archives[n].condition_type&&null!=N.nxt_archives[n].condition_type&&"yes"==N.nxt_archives[n].condition_type?r:c)(e)})),jQuery(document).on("change",".nxt-singular-preview-type .pw_select",function(e){e.currentTarget.id;var n=document.querySelector(".nxt-singular-preview-id .pw_select"),e={action:p+"_singular_preview_type_ajax"};e.rules=this.value,null!=this.value&&"front_page"!=this.value&&jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){if("undefined"!=(e=JSON.parse(e)).response&&1==e.response&&"undefined"!=e.results){var t=e.results;for(jQuery(n).select2("close");n.firstChild;)n.removeChild(n.firstChild);t.forEach(function(e){e=new Option(e.text,e.id,!1,!1);n.append(e),n.dispatchEvent(new Event("change"))})}else{t={id:"all",text:"All"};for(jQuery(n).select2("close");n.firstChild;)n.removeChild(n.firstChild);t=new Option(t.text,t.id,!0,!0);n.append(t),n.dispatchEvent(new Event("change"))}}})}),jQuery(document).on("change",".nxt-archive-preview-type .pw_select",function(e){e.currentTarget.id;var t=this.value,n=document.querySelector(".nxt-archive-preview-id .pw_select"),e={action:p+"_archive_preview_taxonomy_ajax",data:""};e.rules=t,e.data=JSON.stringify(N.nxt_archives[e.rules]),null!=t&&""!=N.nxt_archives[t].condition_type&&null!=N.nxt_archives[t].condition_type&&"yes"==N.nxt_archives[t].condition_type&&jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){if("undefined"!=(e=JSON.parse(e)).response&&1==e.response&&"undefined"!=e.results){var t=e.results;for(jQuery(n).select2("close");n.firstChild;)n.removeChild(n.firstChild);t.forEach(function(e){e=new Option(e.text,e.id,!1,!1);n.append(e),n.dispatchEvent(new Event("change"))})}else{t={id:"all",text:"All"};for(jQuery(n).select2("close");n.firstChild;)n.removeChild(n.firstChild);t=new Option(t.text,t.id,!0,!0);n.append(t),n.dispatchEvent(new Event("change"))}}})}),jQuery(document).on("change","."+Q+" .pw_select",function(e){var e=e.currentTarget.id,o=document.querySelector("#"+e).closest(".cmb-repeatable-grouping").querySelector("."+k+" .pw_multiselect"),e={action:p+"_singular_archives_filters_ajax",data:""};e.rules=this.value,e.data=JSON.stringify(N[e.rules]),null!=this.value&&"front_page"!=this.value?jQuery.ajax({type:"POST",url:ajaxurl,data:e,beforeSend:function(){r(o.closest("."+k))},success:function(e){if("undefined"!=(e=JSON.parse(e)).response&&1==e.response&&"undefined"!=e.results){var t=e.results;for(jQuery(o).select2("close");o.firstChild;)o.removeChild(o.firstChild);var n=new Option("All","all",!0,!0);o.append(n),o.dispatchEvent(new Event("change")),t.forEach(function(e){e=new Option(e.text,e.id,!1,!1);o.append(e),o.dispatchEvent(new Event("change"))})}else{t={id:"all",text:"All"};for(jQuery(o).select2("close");o.firstChild;)o.removeChild(o.firstChild);n=new Option(t.text,t.id,!0,!0);o.append(n),o.dispatchEvent(new Event("change"))}}}):c(o.closest("."+k))}),jQuery(document).on("change","."+I+" .pw_select",function(e){var t=e.currentTarget.id,e=this.value,o=document.querySelector("#"+t).closest(".cmb-repeatable-grouping").querySelector("."+B+" .pw_multiselect"),t={action:p+"_singular_archives_filters_ajax",data:""};t.rules=e,t.data=JSON.stringify(N.nxt_archives[t.rules]),null!=e&&""!=N.nxt_archives[e].condition_type&&null!=N.nxt_archives[e].condition_type&&"yes"==N.nxt_archives[e].condition_type?(r(o.closest("."+B)),jQuery.ajax({type:"POST",url:ajaxurl,data:t,beforeSend:function(){r(o.closest("."+B))},success:function(e){if("undefined"!=(e=JSON.parse(e)).response&&1==e.response&&"undefined"!=e.results){var t=e.results;for(jQuery(o).select2("close");o.firstChild;)o.removeChild(o.firstChild);var n=new Option("All","all",!0,!0);o.append(n),o.dispatchEvent(new Event("change")),t.forEach(function(e){e=new Option(e.text,e.id,!1,!1);o.append(e),o.dispatchEvent(new Event("change"))})}else{t={id:"all",text:"All"};for(jQuery(o).select2("close");o.firstChild;)o.removeChild(o.firstChild);n=new Option(t.text,t.id,!0,!0);o.append(n),o.dispatchEvent(new Event("change"))}}})):c(o.closest("."+B))});var J,U=["set-day","os","browser","login-status","user-roles"],L=document.getElementById("nxt-add-display-rule");L&&(J=".cmb2-id-nxt-hooks-layout",jQuery(L).on("change",function(e){var t=jQuery(L).select2("val"),n=(t+="").split(",");null!=n&&""!=n?(n.includes("particular-post")?jQuery(J+"-specific").slideDown(400):jQuery(J+"-specific").slideUp(400),U.forEach(function(e){n.includes(e)?jQuery(J+"-"+e).slideDown(400):jQuery(J+"-"+e).slideUp(400)})):(jQuery(J+"-specific").slideUp(400),U.forEach(function(e){jQuery(J+"-"+e).slideUp(400)}))}).change());var D,P=document.getElementById("nxt-exclude-display-rule");P&&(D=".cmb2-id-nxt-hooks-layout-exclude",jQuery(P).on("change",function(e){var t=jQuery(P).select2("val"),n=(t+="").split(",");null!=n&&""!=n?(n.includes("particular-post")?jQuery(D+"-specific").slideDown(400):jQuery(D+"-specific").slideUp(400),U.forEach(function(e){n.includes(e)?jQuery(D+"-"+e).slideDown(400):jQuery(D+"-"+e).slideUp(400)})):(jQuery(D+"-specific").slideUp(400),U.forEach(function(e){jQuery(D+"-"+e).slideUp(400)}))}).change());var A=function(e){jQuery(e).select2({ajax:{url:ajaxurl,dataType:"json",method:"post",delay:250,data:function(e){return{q:e.term,page:e.page,action:"nexter_get_particular_posts_query"}},processResults:function(e){return{results:e}},cache:!0},minimumInputLength:2,language:""})},M=document.getElementById("nxt-hooks-layout-specific");M&&A(M);M=document.getElementById("nxt-hooks-layout-exclude-specific");M&&A(M)});